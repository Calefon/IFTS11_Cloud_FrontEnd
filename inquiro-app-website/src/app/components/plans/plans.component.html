<section class="max-w-7xl mx-auto px-4 py-16 transition">
  <h2 class="text-5xl text-[#0B0430] dark:text-white font-medium text-center">
    {{ 'plans.title' | transloco }}
  </h2>

  <!-- Billing toggle -->
  <div class="mt-6 flex items-center justify-center gap-3">
    @if(billing() === 'monthly'){
    <button
      type="button"
      (click)="billing.set('monthly')"
      class="px-3 py-1.5 bg-[#0B0430] hover:bg-[#2A1F5A] dark:bg-gray-200 dark:hover:bg-gray-100 text-white dark:text-[#0B0430] rounded-lg text-xl border transition cursor-pointer"
    >
      {{ 'plans.billing.monthly' | transloco }}
    </button>

    <button
      type="button"
      (click)="billing.set('yearly')"
      class="px-3 py-1.5 rounded-lg text-xl border transition cursor-pointer hover:bg-gray-50 dark:hover:bg-[#2A1F5A]"
    >
      {{ 'plans.billing.yearly' | transloco }}
      <span class="ml-1 text-lg text-emerald-600">{{ 'plans.billing.save20' | transloco }}</span>
    </button>
    } @else {
    <button
      type="button"
      (click)="billing.set('monthly')"
      class="px-3 py-1.5 rounded-lg text-xl border transition cursor-pointer hover:bg-gray-50 dark:hover:bg-[#2A1F5A]"
    >
      {{ 'plans.billing.monthly' | transloco }}
    </button>

    <button
      type="button"
      (click)="billing.set('yearly')"
      class="px-3 py-1.5 rounded-lg text-xl border transition bg-[#0B0430] hover:bg-[#2A1F5A] dark:bg-gray-200 dark:hover:bg-gray-100 text-white dark:text-[#0B0430] cursor-pointer"
    >
      {{ 'plans.billing.yearly' | transloco }}
      <span class="ml-1 text-lg text-green-500">{{ 'plans.billing.save20' | transloco }}</span>
    </button>
    }
  </div>

  <!-- Cards grid -->
  <div class="mt-10 grid gap-8 md:grid-cols-3">
    @for (p of plans; track $index) {
    <app-plans-plan
      [title]="p.title"
      [description]="p.description"
      [free]="p.free ?? ''"
      [price]="p ? (billing() === 'monthly' ? p.price ?? 0 : (p.price ? p.price - (p.price * 0.2) : 0)) : 0"
      [period]="p.period ?? ''"
      [badge]="p.badge"
      [highlight]="p.highlight ?? false"
      [ctaLabel]="p.ctaLabel"
      [ctaHref]="p.ctaHref"
      [features]="p.features"
    />
    }
  </div>
</section>
